<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×›×œ×™ ×œ× ×™×”×•×œ ×©×™×— ×œ×ª×›× ×•×Ÿ ×ª×•×›× ×™×ª ×”×ª×¢×¨×‘×•×ª - ×”×›×œ×” ×•×”×•×’× ×•×ª</title>
    
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Assistant:wght@400;500;600;700&display=swap');
        
        body {
            font-family: 'Assistant', sans-serif;
        }
        
        .hidden {
            display: none !important;
        }
        
        @media print {
            body {
                background-color: white !important;
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
            .no-print {
                display: none !important;
            }
            .print-container {
                max-width: 100% !important;
                margin: 0 !important;
                padding: 0 !important;
            }
            .print-content {
                box-shadow: none !important;
                border: none !important;
                padding: 1rem !important;
            }
            .page-break-inside-avoid {
                page-break-inside: avoid;
            }
        }
    </style>
</head>
<body class="bg-gray-100">

    <div id="app"></div>

    <script>
        // --- START: Data Management ---

        const STORAGE_KEY = 'interventionToolState';

        // --- Local Storage Functions ---
        function saveStateToLocalStorage() {
            try {
                const stateToSave = { ...state, summaryData: null };
                const serializedState = JSON.stringify(stateToSave);
                localStorage.setItem(STORAGE_KEY, serializedState);
            } catch (e) {
                console.error("Could not save state to localStorage", e);
            }
        }

        function loadStateFromLocalStorage() {
            try {
                const serializedState = localStorage.getItem(STORAGE_KEY);
                if (serializedState === null) return undefined;
                return JSON.parse(serializedState);
            } catch (e) {
                console.error("Could not load state from localStorage", e);
                return undefined;
            }
        }
        
        function resetState() {
            if (confirm('×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ××—×•×§ ××ª ×›×œ ×”× ×ª×•× ×™× ×•×œ×”×ª×—×™×œ ××—×“×©? ×¤×¢×•×œ×” ×–×• ××™× ×” ×”×¤×™×›×”.')) {
                localStorage.removeItem(STORAGE_KEY);
                window.location.reload();
            }
        }

        // --- File Import/Export Functions ---
        function exportStateToFile() {
            const stateToSave = { ...state, summaryData: null };
            const jsonString = JSON.stringify(stateToSave, null, 2);
            const blob = new Blob([jsonString], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            const fileName = `intervention-data-${state.schoolName || new Date().toISOString().slice(0,10)}.json`;
            link.href = url;
            link.download = fileName;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
            alert(`×”× ×ª×•× ×™× × ×©××¨×• ×‘×”×¦×œ×—×” ×œ×§×•×‘×¥:\n${fileName}`);
        }
        
        // --- UPDATED Export function specifically for the Plan Builder Tool ---
        function exportSummaryForBuilder() {
            const recommendedComponentIds = {};

            const idMappings = {
                'planning_instruction': 'a1g1', 'pedagogical_flexibility': 'a1g6', 'classroom_management': 'a1g9',
                'assessment_feedback': 'a1g7', 'focused_student_work': 'a1g8', 'data_based_planning': 'a2g1',
                'interdisciplinary_team': 'a3g1', 'fairness_systemic_view': 'a4g2', 'parent_partnership': 'a4g1',
                'coordinator_guidance': 'a3g3', 'teacher_knowledge_deepening': 'a3g2', 'teacher_efficacy': 'a3g1', // maps to self-efficacy related items
                'belonging_involvement': 'a4g1', 'teacher_student_dialogue': 'a1g11', 'learning_spaces': 'a5g1',
                'techno_pedagogical_tools': 'a5g1',
                
                practiceMappings: {
                    '×¤×¨×§×˜×™×§×•×ª ×”××§×“××•×ª ×”×•×¨××” ××¤×•×¨×©×ª': ['a1g4'],
                    '×¤×¨×§×˜×™×§×•×ª ×”××§×“××•×ª ×œ××™×“×” ×¤×¢×™×œ×” ×•××¤×—×™×ª×•×ª ××¢"×': ['a1g3'],
                    '×¤×¨×§×˜×™×§×•×ª ×”××§×“××•×ª ×”×¡×¨×ª ×—×¡××™ ×œ××™×“×” ×•××¢×•×¨×‘×•×ª': ['a1g2'],
                    '×¤×¨×§×˜×™×§×•×ª ×œ×§×™×“×•× ×ª×¤×§×•×“×™× × ×™×”×•×œ×™×™×': ['a1g5'],
                    '×¤×¨×§×˜×™×§×•×ª ×”××§×“××•×ª ××©×•×‘ ×•×”×¢×¨×›×” ××›×•×•× ×™ ×©×•× ×•×ª': ['a1g7'],
                    '×¤×¨×§×˜×™×§×•×ª ×œ×”×¢××“×ª ×”×”×™×›×¨×•×ª ×”×”×•×œ×™×¡×˜×™×ª ×¢× ×”×ª×œ××™×“': ['a4g1', 'a1g11'],
                    '×¤×¨×§×˜×™×§×•×ª ×œ×§×™×“×•× ××•×˜×™×‘×¦×™×”': ['a1g10'],
                    '×¤×¨×§×˜×™×§×•×ª ×œ×§×™×“×•× ×©×™×— ×¤×“×’×•×’×™': ['a1g11'],
                    '×¤×¨×§×˜×™×§×•×ª ×œ×¢×‘×•×“×” ×¢× ×ª×œ××™×“×™× ×××ª×’×¨×™×': ['a1g9'],
                    '×›×œ×™ ×œ×ª×›× ×•×Ÿ ×©×™×¢×•×¨ ××‘×•×¡×¡ ×ª×¤×™×¡×ª UDL': ['a1g1'],
                    '×§×”×™×œ×ª ×”×™×•×•×¢×¦×•×ª ×‘×™×ª ×¡×¤×¨×™×ª (×—×§×¨ ×”×¤×¨×§×˜×™×§×”)': ['a3g1', 'a3g2'],
                }
            };

            Object.keys(state.selectedItems).forEach(key => {
                if (state.selectedItems[key]) {
                    const [domainId, subtopicId, outcomeIndex] = key.split('_');
                    if (idMappings[subtopicId]) {
                        recommendedComponentIds[idMappings[subtopicId]] = true;
                    }
                    if (state.selectedPractices[key]) {
                        Object.keys(state.selectedPractices[key]).forEach(practice => {
                            if (state.selectedPractices[key][practice] && idMappings.practiceMappings[practice]) {
                                idMappings.practiceMappings[practice].forEach(goalId => {
                                    recommendedComponentIds[goalId] = true;
                                });
                            }
                        });
                    }
                }
            });

            // --- FIX: Added guidanceDays to the exported data ---
            const builderData = {
                schoolName: state.schoolName,
                principalName: state.principalName,
                mentorName: state.mentorName,
                coordinatorName: state.coordinatorName,
                guidanceHours: state.guidanceHours,
                guidanceDays: state.guidanceDays, // This was missing
                additionalTraining: state.additionalTraining,
                globalPartners: state.globalPartners,
                recommendedComponentIds: recommendedComponentIds,
                selectedItems: state.selectedItems 
            };
            
            const jsonString = JSON.stringify(builderData, null, 2);
            const blob = new Blob([jsonString], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            const fileName = `summary-for-builder-${state.schoolName || new Date().toISOString().slice(0,10)}.json`;
            link.href = url;
            link.download = fileName;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
            alert(`×¡×™×›×•× ×¢×‘×•×¨ ×›×œ×™ ×”×ª×›× ×•×Ÿ × ×©××¨ ×‘×”×¦×œ×—×” ×œ×§×•×‘×¥:\n${fileName}`);
        }


        function importStateFromFile(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const importedData = JSON.parse(e.target.result);
                    if (importedData && typeof importedData === 'object' && 'view' in importedData) {
                        Object.assign(state, importedData);
                        state.view = 'initial';
                        render();
                        alert('×”× ×ª×•× ×™× × ×˜×¢× ×• ×‘×”×¦×œ×—×” ××”×§×•×‘×¥!');
                    } else {
                        throw new Error('Invalid file format.');
                    }
                } catch (error) {
                    alert('×©×’×™××”: ×”×§×•×‘×¥ ×©× ×‘×—×¨ ××™× ×• ×ª×§×™×Ÿ ××• ×¤×’×•×.');
                    console.error("Error parsing imported file:", error);
                }
            };
            reader.readAsText(file);
            event.target.value = null;
        }

        // --- END: Data Management ---


        // Application State
        const initialState = {
            view: 'initial', currentDomain: 0, selectedItems: {}, selectedPractices: {},
            customPractices: {}, schoolName: '', principalName: '', mentorName: '',
            coordinatorName: '', guidanceHours: '', guidanceDays: {}, additionalTraining: {},
            customTraining: '', schoolData: '', challenges: '', additionalResources: '',
            globalPartners: {}, customGlobalPartner: '', selectedTrainingPractices: {},
            summaryData: null
        };
        
        const state = loadStateFromLocalStorage() || initialState;

        // Data (unchanged)
        const partnersList = ['×× ×”×œ/×ª ×‘×™×ª ×¡×¤×¨', '×¨×›×–×ª ×”×›×œ×”', '××“×¨×™×›×ª ×”×›×œ×”', '×¨×›×–×ª ×”×¢×¨×›×” ×•××“×™×“×”', '×¨×›×–×ª ×¤×“×’×•×’×™×ª', '×™×•×¢×¦×ª ×‘×™×ª ×”×¡×¤×¨', '×¡×’×Ÿ/×™×ª ×× ×”×œ/×ª ×‘×™×ª ×”×¡×¤×¨', '××—× ×›×ª ×”×›×™×ª×”', '×¤×¡×™×›×•×œ×•×’×™×ª', '××•×¨×” ××§×¦×•×¢×™×ª', '××•×¨×ª ×©×™×œ×•×‘'];
        const teacherTrainingPractices = ['×œ×™×•×•×™ ××•×¨×•×ª ×‘×¦×•×•×ª ×”×—×™× ×•×›×™ ×‘×ª×›× ×•×Ÿ ×”×©×™×¢×•×¨', '×—×©×™×¤×ª ×•×”×“×’××ª ××ª×•×“×•×ª ×‘×—×“×¨ ×”××•×¨×™×', '×¦×¤×™×™×” ×‘×©×™×¢×•×¨×™× ×•××ª×Ÿ ××©×•×‘', '×™×¦×™×¨×ª ×§×”×™×œ×” ×¢× ×ª×”×œ×™×›×™ ×¨×¤×œ×§×¦×™×”', '××•×“×œ×™× ×’', '×”×œ×™×›×” ×œ×™××•×“×™×ª', '×œ×™×•×•×™ ×× ×”×™×’×•×ª ×”×‘×™× ×™×™× ×‘×”×•×‘×œ×ª ×ª×”×œ×™×›×™×', '××—×¨'];
        const daysOfWeek = ["×™×•× ×", "×™×•× ×‘", "×™×•× ×’", "×™×•× ×“", "×™×•× ×”"];
        const trainingAreas = ['×—×™× ×•×š ×œ×©×•× ×™', '×—×™× ×•×š ×—×‘×¨×ª×™', '×¢×œ××', '××ª××˜×™×§×”', '××—×•× × ×™×', '×××™×¨×™×', '××—×¨'];
        const domains = [ { id: 'arena1', title: '×”×œ"×” ×‘×›×™×ª×” ×”×”×˜×¨×•×’× ×™×ª', subtopics: [ { id: 'planning_instruction', title: '×ª×›× ×•×Ÿ ×”×•×¨××” ××›×•×•× ×ª ×©×•× ×•×ª ×•×¦×•×¨×š (×¢×™×¦×•×‘ ××•× ×™×‘×¨×¡×œ×™ ×œ×œ××™×“×”)', expectedOutcomes: [ { text: '×”×¢×œ××ª ××—×•×– ×”×ª×œ××™×“×™× ×”××¢×•×¨×‘×™× ×•×¤×¢×™×œ×™× ×‘×©×™×¢×•×¨' }, { text: '×¢×œ×™×™×” ×‘××—×•×– ×”××•×¨×•×ª ×”××“×•×•×—×•×ª ×¢×œ ×©×™××•×© ×‘××ª×•×“×•×ª ×”××–×× ×•×ª ××¢×•×¨×‘×•×ª ××ª××©×›×ª ×‘×©×™×¢×•×¨:', selectablePractices: ['×¤×¨×§×˜×™×§×•×ª ×”××§×“××•×ª ×”×•×¨××” ××¤×•×¨×©×ª', '×¤×¨×§×˜×™×§×•×ª ×”××§×“××•×ª ×œ××™×“×” ×¤×¢×™×œ×” ×•××¤×—×™×ª×•×ª ××¢"×', '×¤×¨×§×˜×™×§×•×ª ×”××§×“××•×ª ×”×¡×¨×ª ×—×¡××™ ×œ××™×“×” ×•××¢×•×¨×‘×•×ª', '×¤×¨×§×˜×™×§×•×ª ×œ×§×™×“×•× ×ª×¤×§×•×“×™× × ×™×”×•×œ×™×™×', '××—×¨'] }, { text: '×¢×œ×™×™×” ×‘××—×•×– ×”××•×¨×•×ª ×”××“×•×•×—×•×ª ×¢×œ ×ª×›× ×•×Ÿ ×”×©×™×¢×•×¨×™× ×‘×”×ª×××” ×œ×¢×§×¨×•× ×•×ª ×”-UDL (×§×™×©×•×¨ ×œ×›×œ×™ ×ª×›× ×•×Ÿ ×©×™×¢×•×¨ UDL)' }, { text: '×©×™×¤×•×¨ ×‘×”×™×©×’×™× ×©×œ ×ª×œ××™×“×™× ×‘××™×§×•×“' } ] }, { id: 'pedagogical_flexibility', title: '×’××™×©×•×ª ×¤×“×’×•×’×™×ª (4 ×”×××¨×’× ×™×)', expectedOutcomes: [ { text: '×¢×œ×™×™×” ×‘××—×•×– ×”××•×¨×™× ×”××“×•×•×—×™× ×¢×œ ×©×™××•×© ×¨×‘ ×™×•×ª×¨ ×‘×¢×§×¨×•× ×•×ª ×©×œ ×’××™×©×•×ª ×¤×“×’×•×’×™×ª ×•×ª×›× ×•×Ÿ ×™×•× ×•×©×‘×•×¢ ×”×œ××™×“×”:', selectablePractices: ['×¤×¨×§×˜×™×§×•×ª ×”××§×“××•×ª ×œ××™×“×” ×‘×”×¨×›×‘×™× ×©×•× ×™× (××¨×’×•×Ÿ ×”×œ×•××“×™×)', '×¤×¨×§×˜×™×§×•×ª ×”××§×“××•×ª ×œ××™×“×” ×‘××¨×—×‘×™× ×©×•× ×™× (××¨×’×•×Ÿ ×”××¨×—×‘)', '×¤×¨×§×˜×™×§×•×ª ×œ××¨×’×•×Ÿ ×–××Ÿ ×”×œ××™×“×”', '×¤×¨×§×˜×™×§×•×ª ×œ××¨×’×•×Ÿ ×ª×›× ×™ ×”×œ××™×“×”', '××—×¨'] } ] }, { id: 'classroom_management', title: '× ×™×”×•×œ ×›×™×ª×”', expectedOutcomes: [ { text: '×¢×œ×™×™×” ×‘××—×•×– ×”××•×¨×™× ×”××“×•×•×—×™× ×¢×œ ×ª×—×•×©×ª ××¡×•×’×œ×•×ª ×’×‘×•×”×” ×™×•×ª×¨ ×œ× ×™×”×•×œ ×›×™×ª×” ×”×˜×¨×•×’× ×™×ª' }, { text: '×™×¨×™×“×” ×‘××—×•×– ×”×ª×œ××™×“×™× ×”××•×©×¢×™×' }, { text: '×¢×œ×™×™×” ×‘××—×•×– ×”××•×¨×•×ª ×”××“×•×•×—×•×ª ×¢×œ ×©×™××•×© ×‘××ª×•×“×•×ª ×”××–×× ×•×ª ××¢×•×¨×‘×•×ª ××ª××©×›×ª ×‘×©×™×¢×•×¨:', selectablePractices: ['×¤×¨×§×˜×™×§×•×ª ×”××§×“××•×ª ×œ××™×“×” ×¤×¢×™×œ×” ×•××¤×—×™×ª×•×ª ××¢"×', '×¤×¨×§×˜×™×§×•×ª ×”××§×“××•×ª ×”×¡×¨×ª ×—×¡××™ ×œ××™×“×” ×•××¢×•×¨×‘×•×ª', '×¤×¨×§×˜×™×§×•×ª ×œ×§×™×“×•× ×ª×¤×§×•×“×™× × ×™×”×•×œ×™×™×', '×¤×¨×§×˜×™×§×•×ª ×”××§×“××•×ª ×œ××™×“×” ×‘×”×¨×›×‘×™× ×©×•× ×™×', '×›×œ×™ ×œ×ª×›× ×•×Ÿ ×©×™×¢×•×¨ ××‘×•×¡×¡ ×ª×¤×™×¡×ª UDL', '×¤×¨×§×˜×™×§×•×ª ×œ×¢×‘×•×“×” ×¢× ×ª×œ××™×“×™× ×××ª×’×¨×™×', '××—×¨'] } ] }, { id: 'inclusive_practices_application', title: '×™×™×©×•× ×¤×¨×§×˜×™×§×•×ª ××›×œ×™×œ×•×ª', expectedOutcomes: [ { text: '×¢×œ×™×™×” ×‘××¡×¤×¨ ×”××•×¨×™× ×”××™×™×©××™× ×¤×¨×§×˜×™×§×•×ª ××›×œ×™×œ×•×ª ×‘××•×¤×Ÿ ×¢×§×‘×™:', selectablePractices: ['×¤×¨×§×˜×™×§×•×ª ×”××§×“××•×ª ×”×•×¨××” ××¤×•×¨×©×ª', '×¤×¨×§×˜×™×§×•×ª ×”××§×“××•×ª ×œ××™×“×” ×¤×¢×™×œ×” ×•××¤×—×™×ª×•×ª ××¢"×', '×¤×¨×§×˜×™×§×•×ª ×”××§×“××•×ª ×”×¡×¨×ª ×—×¡××™ ×œ××™×“×” ×•××¢×•×¨×‘×•×ª', '×¤×¨×§×˜×™×§×•×ª ×”××§×“××•×ª ××©×•×‘ ×•×”×¢×¨×›×” ××›×•×•× ×™ ×©×•× ×•×ª', '×¤×¨×§×˜×™×§×•×ª ×œ×§×™×“×•× ×ª×¤×§×•×“×™× × ×™×”×•×œ×™×™×', '×¤×¨×§×˜×™×§×•×ª ×œ×”×¢××“×ª ×”×”×™×›×¨×•×ª ×”×”×•×œ×™×¡×˜×™×ª ×¢× ×”×ª×œ××™×“', '×¤×¨×§×˜×™×§×•×ª ×œ×§×™×“×•× ××•×˜×™×‘×¦×™×”', '×¤×¨×§×˜×™×§×•×ª ×œ×§×™×“×•× ×©×™×— ×¤×“×’×•×’×™', '××—×¨'] } ] }, { id: 'assessment_feedback', title: '××©×•×‘ ×•×”×¢×¨×›×” ××›×•×•× ×™ ×©×•× ×•×ª', expectedOutcomes: [ { text: '×¨×›×™×‘×™ ×”×ª×¢×•×“×” ××©×§×¤×™× ××ª ×ª×¤×™×¡×ª ×”×”×›×œ×” ×•×”×”×•×’× ×•×ª' }, { text: '×¢×œ×™×™×” ×‘×©×™××•×© ×‘××’×•×•×Ÿ ×›×œ×™ ×”×¢×¨×›×” ×¤× ×™××™×™×:', practiceListTitle: '×‘×—×™×¨×ª ×¤×¨×§×˜×™×§×•×ª ×©×œ ×ª×”×œ×™×›×™ ×”×¢×¨×›×” ×•××©×•×‘:', selectablePractices: ['×¤×¨×§×˜×™×§×•×ª ×©×œ ×ª×”×œ×™×›×™ ×”×¢×¨×›×” ×•××©×•×‘ ××›×•×•× ×™ ×©×•× ×•×ª', '××—×¨'] }, { text: '××ª×§×™×™× ×©×™×— ×œ×œ××™×“×” ×× ×ª×•× ×™× ×œ×¦×•×¨×š ×ª×›× ×•×Ÿ ×ª×”×œ×™×›×™ ××©×•×‘ ×•×”×¢×¨×›×” ××›×•×•× ×™ ×©×•× ×•×ª' } ] }, { id: 'focused_student_work', title: '×¢×‘×•×“×” ×¢× ×ª×œ××™×“×™× ×‘××™×§×•×“', expectedOutcomes: [ { text: '×©×™×¤×•×¨ ×‘××¤×§×˜×™×‘×™×•×ª ×ª×›× ×™×•×ª ×”×¢×‘×•×“×” ×¢×‘×•×¨ ×ª×œ××™×“×™× ×‘××™×§×•×“ (×©××™× × ×–×›××™ ×©×™×¨×•×ª×™ ×—×™× ×•×š ××™×•×—×“×™×)' } ] } ] }, { id: 'arena2', title: '×ª×¨×‘×•×ª ×•××“×™× ×™×•×ª ×”×›×œ×” ×•×”×•×’× ×•×ª ×‘×™×ª ×¡×¤×¨×™×ª', subtopics: [ { id: 'inclusive_vision', title: '×‘×™×¡×•×¡ ×ª×¤×™×¡×” ××›×™×œ×” ×•×”×•×’× ×ª ×•×ª×¨×’×•××” ×œ×ª×”×œ×™×›×™× ×‘×™×ª-×¡×¤×¨×™×™×', expectedOutcomes: [ { text: '×ª×›× ×•×Ÿ ×”××¢× ×™× ×‘×¨××™×™×” ×‘×™×ª ×¡×¤×¨×™×ª ×™×™×¢×©×” ×‘×”×ª×× ×œ××•×“×œ ×”-MTSS' }, { text: '×¢×œ×™×™×” ×‘×©×™××•×© ×©×œ ×¦×•×•×ª ×”××•×¨×™× ×‘××•×©×’×™×, ×¢×§×¨×•× ×•×ª ×•×©×™×— ××¢×•×œ× ×”×”×›×œ×” ×•×”×”×•×’× ×•×ª:', practiceListTitle: '×‘×—×™×¨×ª ××•×©×’×™×/×¢×§×¨×•× ×•×ª:', selectablePractices: ['×”×›×œ×œ×”', '×©×•×ª×¤×•×ª ×¢× ×”×•×¨×™×', '×¢×™×¦×•×‘ ××•× ×™×‘×¨×¡×œ×™', '×¤×¡×™×›×•×¤×“×’×•×’×™×”', '×™×—×¡×™ ×§×¨×‘×” ×•××›×¤×ª×™×•×ª', '×ª×¨×‘×•×ª ××“×™× ×™×•×ª ×•×™×™×©×•×', '×—×¡××™ ×œ××™×“×” ×•×”×©×ª×ª×¤×•×ª', '×”×•×¨×“×ª ×–××Ÿ ××¢"× (×¦××¦×•× ×©×œ×‘ ×”×”×§×“××” ×œ×˜×•×‘×ª ××§×¡×•× ×–××Ÿ ×”×œ××™×“×” ×”×¤×¢×™×œ×”)', '×”×›×œ×” ×¤×“×’×•×’×™×ª', '×ª×•×›× ×™×ª ×¢×‘×•×“×” ××¨×•×‘×“×ª', '××—×¨'] }, { text: '×”×¦×•×•×ª ××‘× ×” ××“×™× ×™×•×ª ××©×•×ª×¤×ª ×œ×‘×™×¡×•×¡ ×ª×¨×‘×•×ª ××›×™×œ×” ×•×”×•×’× ×ª ×•×™×™×©×•××” (×œ×”×œ×Ÿ ××‘×—×¨ ×“×•×’×××•×ª ×œ×”×˜××¢×”):', practiceListTitle: '×“×•×’×××•×ª ×œ×”×˜××¢×ª ××“×™× ×™×•×ª ×‘×™×ª-×¡×¤×¨×™×ª:', selectablePractices: ['×“×™××œ×•×’ ×¢× ×”×”×•×¨×™× ×”××•×©×ª×ª ×¢×œ ×¢×§×¨×•× ×•×ª ××›×™×œ×™× (××¡×™×¤×•×ª ×”×•×¨×™×, ×©×™×—×•×ª, ×”×¨×¦××•×ª, ×™××™ ×©×™×, ×™×©×™×‘×•×ª ×”× ×”×’×ª ×”×•×¨×™×)', '×“×™××œ×•×’ ×‘×™××™ ×”×•×¨×™× ×”××©×§×£ ××ª ×ª×¤×™×¡×ª ×”×”×›×œ×” ×•×”×”×•×’× ×•×ª', '×™×©×™×‘×•×ª ×¤×“×’×•×’×™×•×ª ××‘×•×¡×¡×•×ª × ×ª×•× ×™× ×•××›×•×•× ×•×ª ×œ×ª×œ××™×“ ×”×©×œ×', '×™×•× ×œ××™×“×” ××¡×ª×™×™×/××ª×—×™×œ ×‘×©×™×— ××¦××™×—', '×ª×§× ×•×Ÿ ×•"×”×× ×™ ××××™×Ÿ" ×©×œ ×‘×™×ª ×”×¡×¤×¨ ××©×§×¤×™× ××ª ×ª×¤×™×¡×ª ×”×”×›×œ×” ×•×”×”×•×’× ×•×ª', '×¨×›×™×‘×™ ×”×ª×¢×•×“×” ××©×§×¤×™× ××ª ×ª×¤×™×¡×ª ×”×”×›×œ×” ×•×”×”×•×’× ×•×ª'] } ] }, { id: 'data_based_planning', title: '×ª×›× ×™×ª ×¢×‘×•×“×” ×‘×™×ª ×¡×¤×¨×™×ª ××‘×•×¡×¡×ª × ×ª×•× ×™×', expectedOutcomes: [ { text: '×™×©×™×‘×•×ª ×¤×“×’×•×’×™×•×ª ××‘×•×¡×¡×•×ª × ×ª×•× ×™× ×•××›×•×•× ×•×ª ×œ×ª×œ××™×“ ×”×©×œ×' }, { text: '×”×¦×•×•×ª ×”×—×™× ×•×›×™ ×××¤×” ×ª×œ××™×“×™× ×‘×××¦×¢×•×ª ×›×œ×™ ××™×¤×•×™ ×”×•×œ×™×¡×˜×™ (×”×¢×•×’×Ÿ) ×•×‘×•× ×” ×ª×›× ×™×•×ª ×¢×‘×•×“×” ××‘×•×¡×¡×•×ª × ×ª×•× ×™×' }, { text: '×ª×›× ×•×Ÿ ×”×¢×‘×•×“×”, ×§×‘×œ×ª ×”×—×œ×˜×•×ª ×•×‘× ×™×™×ª ×ª×›× ×™×•×ª ×”×ª×¢×¨×‘×•×ª ××‘×•×¡×¡×™× ×¢×œ × ×™×ª×•×— ×ª×•×‘× ×•×ª ×× ×ª×•× ×™×' } ] }, { id: 'interdisciplinary_team', title: '×¦×•×•×ª ×‘×™×Ÿ-××§×¦×•×¢×™ ××•×‘×™×œ ×”×›×œ×” ×•×”×•×’× ×•×ª', expectedOutcomes: [ { text: '××ª×§×™×™××ª ×œ××™×“×ª ×¢××™×ª×™× ×‘××’×•×•×Ÿ ×“×¨×›×™×:', selectablePractices: ['×§×”×™×œ×ª ×”×™×•×•×¢×¦×•×ª ×‘×™×ª ×¡×¤×¨×™×ª (×—×§×¨ ×”×¤×¨×§×˜×™×§×”)', '×¦×¤×™×™×ª ×¢××™×ª×™×', '×™×©×™×‘×•×ª ×¦×•×•×ª×™×', '××œ×™××•×ª ××•×¨×™×', '××•×¨×” ×—×•× ×š ××•×¨×”', '×¡×™××•×œ×¦×™×•×ª', '××¨×—×‘×™ ×—×§×¨ ×•×œ××™×“×” ×œ××•×¨×™×', '××—×¨'] }, { text: '××ª×§×™×™××™× ×©×™×ª×•×¤×™ ×¤×¢×•×œ×” ×‘×§×¨×‘ ×× ×”×™×’×•×ª ×”×‘×™× ×™×™× ×œ×§×™×“×•× ×™×¢×“×™ ×”×›×œ×” ×•×”×•×’× ×•×ª/×”×•×¨××” ×‘×›×™×ª×” ×”×˜×¨×•×’× ×™×ª' } ] }, { id: 'fairness_systemic_view', title: '×”×•×’× ×•×ª ×›×ª×¤×™×¡×” ××¢×¨×›×ª×™×ª', expectedOutcomes: [ { text: "×¢×œ×™×™×” ×‘××—×•×– ×”×ª×œ××™×“×™× ×”××“×•×•×—×™× ×¢×œ ×ª×—×•×©×ª ×‘×™×˜×—×•×Ÿ" }, { text: "×¢×œ×™×™×” ×‘××—×•×– ×”×ª×œ××™×“×™× ×”××“×•×•×—×™× ×¢×œ ×ª×—×•×©×ª ×©×™×™×›×•×ª" }, { text: "×¢×œ×™×™×” ×‘××—×•×– ×”×ª×œ××™×“×™× ×”××“×•×•×—×™× ×¢×œ ××’'× ×¡×™" }, { text: '×‘×™×ª ×”×¡×¤×¨ ××™×™×©× ×ª×¤×™×¡×” ×©×œ ×”×•×’× ×•×ª ×‘××¨×—×‘×™× ×©×•× ×™×:', practiceListTitle: '×‘×—×™×¨×ª ×¤×¨×§×˜×™×§×•×ª ×•×“×’×©×™× ×œ×™×™×©×•× ×‘××—×“ ××• ×™×•×ª×¨ ××”×¢×§×¨×•× ×•×ª ×”×‘××™×:', selectablePractices: ['××›×¤×ª×™×•×ª', '×’××™×©×•×ª', '× ×’×™×©×•×ª', '×××•×Ÿ', '××™×›×•×ª', '×©×§×™×¤×•×ª', '××’×•×•×Ÿ'] }, { text: '×”×¤×—×ª×ª ×”×©×™××•×© ×‘×¤×¨×§×˜×™×§×•×ª ××“×™×¨×•×ª', isSubOutcome: true }, { text: '×™×¨×™×“×” ×‘××—×•×– ×”×ª×œ××™×“×™× ×”××•×©×¢×™×', isSubOutcome: true }, ] }, { id: 'parent_partnership', title: '×©×•×ª×¤×•×ª ×¢× ×”×•×¨×™× ×•×§×”×™×œ×” ×× ×§×•×“×ª ××‘×˜ ××›×™×œ×” ×•×”×•×’× ×ª', expectedOutcomes: [ { text: '×™××™ ×”×•×¨×™× ×”××©×§×¤×™× ×”×›×œ×” ×•×”×•×’× ×•×ª' }, { text: '××ª×Ÿ ×™×™×¦×•×’ ×œ×”×•×Ÿ ×”×ª×¨×‘×•×ª×™ ×©×œ ×§×”×™×œ×ª ×‘×™×ª-×”×¡×¤×¨ (×¤×“×’×•×’×™×” ×©×œ ×–×”×•×™×•×ª)'}, { text: '×©×•×ª×¤×•×ª ×—×™× ×•×›×™×ª ×¢× ×”×”×•×¨×™×' } ] } ] }, { id: 'arena3', title: '×ª×—×•×©×ª ××¡×•×’×œ×•×ª ×”×¦×•×•×ª ×”×—×™× ×•×›×™', subtopics: [ { id: 'coordinator_guidance', title: '×œ×™×•×•×™ ×¨×›×–×ª ×”×”×›×œ×” ×‘×¢×‘×•×“×ª×”', expectedOutcomes: [ { text: '×¢×œ×™×™×” ×‘×ª×—×•×©×ª ×”××¡×•×’×œ×•×ª ×©×œ ×¨×›×–×ª ×”×”×›×œ×” ×œ×™×™×©× ××ª ×ª×›× ×™×ª ×”×¢×‘×•×“×” ×©×œ×”' }, { text: '×”×¦×œ×—×” ×‘×™×™×©×•× ×™×¢×“×™ ×”×¢×‘×•×“×” ×©×œ ×¨×›×–×ª ×”×”×›×œ×” ×‘×”×ª×× ×œ××¡××š ××‘× ×™ ×“×¨×š' } ] }, { id: 'teacher_knowledge_deepening', title: '×”×¢××§×ª ×”×™×“×¢ ×”××§×¦×•×¢×™ ×©×œ ×”××•×¨×™×', expectedOutcomes: [ { text: '×¢×œ×™×™×” ×‘×©×™××•×© ×©×œ ×¦×•×•×ª ×”××•×¨×™× ×‘××•×©×’×™×, ×¢×§×¨×•× ×•×ª ×•×©×™×— ××¢×•×œ× ×”×”×›×œ×” ×•×”×”×•×’× ×•×ª:', practiceListTitle: '×‘×—×™×¨×ª ××•×©×’×™×/×¢×§×¨×•× ×•×ª:', selectablePractices: ['×”×›×œ×œ×”', '×©×•×ª×¤×•×ª ×¢× ×”×•×¨×™×', '×¢×™×¦×•×‘ ××•× ×™×‘×¨×¡×œ×™', '×¤×¡×™×›×•×¤×“×’×•×’×™×”', '×™×—×¡×™ ×§×¨×‘×” ×•××›×¤×ª×™×•×ª', '×ª×¨×‘×•×ª ××“×™× ×™×•×ª ×•×™×™×©×•×', '×—×¡××™ ×œ××™×“×” ×•×”×©×ª×ª×¤×•×ª', '×”×•×¨×“×ª ×–××Ÿ ××¢"×', '×”×›×œ×” ×¤×“×’×•×’×™×ª', '×ª×•×›× ×™×ª ×¢×‘×•×“×” ××¨×•×‘×“×ª', '××—×¨'] }, { text: '×”×¦×•×•×ª ×œ×•××“ ×•××ª×¤×ª×— ××§×¦×•×¢×™×ª ×‘×ª×—×•× ×”×”×›×œ×” ×•×”×”×•×’× ×•×ª (×™×© ×œ×‘×—×•×¨ ×™×¢×“×™×/× ×•×©××™× ××ª×•×š ×”×¨×©×™××” ×”×‘××”):', practiceListTitle: '×‘×—×™×¨×ª ×™×¢×“×™×/× ×•×©××™× ×œ×”×ª×¤×ª×—×•×ª ××§×¦×•×¢×™×ª:', selectablePractices: ['×œ×™×•×•×™ ×ª×œ××™×“×™× ×¢× ×‘×¢×™×•×ª ×”×ª× ×”×’×•×ª', '×œ×™×•×•×™ ×ª×œ××™×“×™× ×¢× ×‘×¢×™×•×ª ×§×©×‘', '×”××—×•× ×Ÿ ×‘×›×™×ª×ª×•', '×™×œ×“×™× ×‘×¡×™×›×•×Ÿ', '×”×•×¨××” ×‘×›×™×ª×” ×”×˜×¨×•×’× ×™×ª', '× ×•×™×¨×•×¤×“×’×•×’×™×”', '×”×¢×¨×›×” ××‘×•×¡×¡×ª ××’×•×•×Ÿ', '××•×›×œ×•×¡×™×•×ª ×™×™×—×•×“×™×•×ª', '×”×•×¨××” ××•×ª×××ª ×¤×¨×˜', '×•×™×¡×•×ª ×¢×¦××™ ×œ×œ××™×“×”', '××•×˜×™×‘×¦×™×” ×œ×œ××™×“×”', '×‘× ×™×™×ª ×ª×›× ×™×•×ª ××™×©×™×•×ª ×•/××• ×›×™×ª×ª×™×•×ª', '×ª×›× ×•×Ÿ ×”×•×¨××” ××‘×•×¡×¡×ª × ×ª×•× ×™×', '×›×œ×™× ×˜×›× ×•-×¤×“×’×•×’×™×™×'] }, { text: '××ª×§×™×™× ×©×™×— ×œ×œ××™×“×” ×× ×ª×•× ×™× ×œ×¦×•×¨×š ×ª×›× ×•×Ÿ ×”×¢×‘×•×“×”, ×§×‘×œ×ª ×”×—×œ×˜×•×ª ×•×‘× ×™×™×ª ×ª×›× ×™×•×ª ×”×ª×¢×¨×‘×•×ª' }, { text: '××ª×§×™×™××ª ×œ××™×“×ª ×¢××™×ª×™× ×‘××’×•×•×Ÿ ×“×¨×›×™×:', selectablePractices: ['×§×”×™×œ×ª ×”×™×•×•×¢×¦×•×ª ×‘×™×ª ×¡×¤×¨×™×ª (×—×§×¨ ×”×¤×¨×˜×§×˜×™×§×”)', '×¦×¤×™×™×ª ×¢××™×ª×™×', '×™×©×™×‘×•×ª ×¦×•×•×ª×™×', '××œ×™××•×ª ××•×¨×™×', '××•×¨×” ×—×•× ×š ××•×¨×”', '×¡×“× ××•×ª ×¤×™×ª×•×— ××§×¦×•×¢×™', '×”×©×ª×œ××•×ª ××•×¡×“×™×ª', '×¤×•×¨××˜ ×“×™×’×™×˜×œ×™ ×œ×©×™×ª×•×£ ×—×•××¨×™×', '×¡×™××•×œ×¦×™×•×ª', '××¨×—×‘×™ ×—×§×¨ ×•×œ××™×“×” ×œ××•×¨×™×', '××—×¨'] } ] }, { id: 'teacher_efficacy', title: '×—×™×–×•×§ ×ª×—×•×©×ª ×”××¡×•×’×œ×•×ª ×©×œ ×”××•×¨×”', expectedOutcomes: [ { text: '×¢×œ×™×™×” ×‘×ª×—×•×©×ª ×”××¡×•×’×œ×•×ª ×©×œ ×”××•×¨×™× ×‘××™××“×™× ×©×•× ×™× ××§×“××™ ×”×›×œ×” ×•×”×•×’× ×•×ª' }, { text: '×¢×œ×™×™×” ×‘×ª×—×•×©×ª ×”××¡×•×’×œ×•×ª ×©×œ ×”××•×¨×™× ×œ× ×™×”×•×œ ×©×™×— ××¦××™×— ×¢× ×”×ª×œ××™×“×™× ×•×ª×—×•×©×ª ××›×¤×ª×™×•×ª' }, { text: '×¢×œ×™×™×” ×‘××¡×¤×¨ ×”×ª×œ××™×“×™× ×”××¢×•×¨×‘×™× ×‘×©×™×¢×•×¨' } ] } ] }, { id: 'arena4', title: '×™×—×¡×™ ×§×¨×‘×” ×•××›×¤×ª×™×•×ª', subtopics: [ { id: 'belonging_involvement', title: '×©×™×™×›×•×ª ×•××¢×•×¨×‘×•×ª', expectedOutcomes: [ { text: '×¢×œ×™×™×” ×‘××—×•×– ×”×ª×œ××™×“×™× ×”××“×•×•×—×™× ×¢×œ ×ª×—×•×©×ª ×©×™×™×›×•×ª' }, { text: '×¢×œ×™×™×” ×‘××—×•×– ×”×ª×œ××™×“×™× ×”××“×•×•×—×™× ×¢×œ ×ª×—×•×©×ª ×‘×™×˜×—×•×Ÿ ×‘×‘×™×ª ×”×¡×¤×¨' }, { text: '×¢×œ×™×™×” ×‘×“×™×•×•×— ×”××•×¨×™× ×¢×œ ×”×™×›×¨×•×ª ××¢××™×§×” ×¢× ×ª×œ××™×“×™×”× ×××’×•×•×Ÿ × ×§×•×“×•×ª ××‘×˜ (×”×ª×œ××™×“ ×”×©×œ×)' } ] }, { id: 'teacher_student_dialogue', title: '×“×™××œ×•×’ ××•×¨×”-×ª×œ××™×“', expectedOutcomes: [ { text: '×¢×œ×™×™×” ×‘×“×™×•×•×— ×”××•×¨×™× ×¢×œ ×©×™××•×© ×‘×›×œ×™× ×¤×¡×™×›×•×¤×“×’×•×’×™×™× ×œ×—×™×–×•×§ ×”×§×©×¨ ×‘×™×Ÿ ××•×¨×”-×ª×œ××™×“:', selectablePractices: ['"×¤×¡×™×¤×¡"', '××©×•×‘ ×œ×§×™×“×•× ×¤×¡×™×›×•×¤×“×’×•×’×™×”', '×©××œ×•×ª ××•×§×™×¨×•×ª', '×‘× ×™×™×ª ×××•×Ÿ ×‘×™×Ÿ ××•×¨×” ×œ×ª×œ××™×“', '× ×™×”×•×œ ×©×™×— ××™×©×™ ××¦××™×—', '××‘×•×’×¨ ××©××¢×•×ª×™', '×¦×™×¤×™×•×ª ×’×‘×•×”×•×ª', '××—×¨'] } ] } ] }, { id: 'arena5', title: '×¡×‘×™×‘×ª ×œ××™×“×” ××§×“××ª ×”×›×œ×” ×•×”×•×’× ×•×ª', subtopics: [ { id: 'learning_spaces', title: '××¨×—×‘×™ ×œ××™×“×”', expectedOutcomes: [ { text: '×¢×œ×™×™×” ×‘×©×™××•×© ×‘××’×•×•×Ÿ ××¨×—×‘×™ ×œ××™×“×”:', selectablePractices: ['××’×•×•×Ÿ ××¨×—×‘×™× ×‘×›×™×ª×”', '××¨×—×‘×™ ×œ××™×“×” ×—×•×¥ ×›×™×ª×ª×™×™×', '××¨×—×‘×™ ×œ××™×“×” ×—×•×¥ ×‘×™×ª ×¡×¤×¨×™×™×', '××¨×—×‘×™ ×œ××™×“×” ×™×¨×•×§×™×'] } ] }, { id: 'techno_pedagogical_tools', title: '×›×œ×™× ×˜×›× ×•-×¤×“×’×•×’×™×™×', expectedOutcomes: [ { text: '×¢×œ×™×™×” ×‘×©×™××•×© ×‘×›×œ×™× ×“×™×’×™×˜×œ×™×™× ×”××¡×™×™×¢×™× ×‘×”×¡×¨×ª ×—×¡××™ ×œ××™×“×” ×•××’×‘×™×¨×™× ××¢×•×¨×‘×•×ª' } ] } ] } ];

        // Helper functions
        function navigateTo(view) { state.view = view; saveStateToLocalStorage(); render(); window.scrollTo(0, 0); }
        function toggleSelection(domainId, subtopicId, outcomeIndex) { const key = `${domainId}_${subtopicId}_${outcomeIndex}`; state.selectedItems[key] = !state.selectedItems[key]; if (!state.selectedItems[key]) { delete state.selectedPractices[key]; delete state.customPractices[key]; } saveStateToLocalStorage(); render(); }
        function togglePractice(outcomeKey, practice) { if (!state.selectedPractices[outcomeKey]) { state.selectedPractices[outcomeKey] = {}; } state.selectedPractices[outcomeKey][practice] = !state.selectedPractices[outcomeKey][practice]; saveStateToLocalStorage(); render(); }
        function getSelectedCount() { return Object.values(state.selectedItems).filter(Boolean).length; }
        function createSummary() { const summary = {}; const selectedGlobalPartnersList = Object.keys(state.globalPartners).filter(p => state.globalPartners[p]); let selectedTrainingList = Object.keys(state.selectedTrainingPractices).filter(p => state.selectedTrainingPractices[p]); const selectedDays = Object.keys(state.guidanceDays).filter(day => state.guidanceDays[day]).join(', '); let selectedTrainingAreas = Object.keys(state.additionalTraining).filter(area => state.additionalTraining[area]); if (state.additionalTraining['××—×¨'] && state.customTraining) { selectedTrainingAreas = selectedTrainingAreas.filter(area => area !== '××—×¨'); selectedTrainingAreas.push(`××—×¨: ${state.customTraining}`); } if (state.selectedTrainingPractices['××—×¨'] && state.customPractices['training_other']) { selectedTrainingList = selectedTrainingList.filter(p => p !== '××—×¨'); selectedTrainingList.push(`××—×¨: ${state.customPractices['training_other']}`); } domains.forEach(domain => { domain.subtopics.forEach(subtopic => { subtopic.expectedOutcomes.forEach((outcome, index) => { const key = `${domain.id}_${subtopic.id}_${index}`; if (state.selectedItems[key]) { if (!summary[domain.title]) summary[domain.title] = {}; if (!summary[domain.title][subtopic.title]) summary[domain.title][subtopic.title] = []; let practices = state.selectedPractices[key] ? Object.keys(state.selectedPractices[key]).filter(p => state.selectedPractices[key][p]) : []; if (state.selectedPractices[key]?.['××—×¨'] && state.customPractices[key]) { practices = practices.filter(p => p !== '××—×¨'); practices.push(`××—×¨: ${state.customPractices[key]}`); } summary[domain.title][subtopic.title].push({ outcome: outcome.text, practices: practices }); } }); }); }); state.summaryData = { summary, partners: selectedGlobalPartnersList, trainingPractices: selectedTrainingList, days: selectedDays, trainingAreas: selectedTrainingAreas.join('; ') }; navigateTo('summary'); }

        // Render functions
        function renderInitialView() {
            return `
                <div class="bg-white rounded-xl shadow-lg p-8 mb-6">
                    <div class="text-center mb-8">
                        <h1 class="text-3xl font-bold text-indigo-800 mb-2">×›×œ×™ ×œ× ×™×”×•×œ ×©×™×— ×œ×ª×›× ×•×Ÿ ×ª×•×›× ×™×ª ×”×“×¨×›×”</h1>
                        <h2 class="text-2xl font-bold text-indigo-800">×‘×ª×—×•× ×”×”×›×œ×” ×•×”×”×•×’× ×•×ª</h2>
                    </div>
                    
                    <div class="space-y-6">
                        <div class="p-4 bg-gray-50 border border-gray-200 rounded-lg">
                            <h3 class="text-lg font-bold text-gray-700 mb-3">× ×™×”×•×œ × ×ª×•× ×™×</h3>
                            <p class="text-sm text-gray-600 mb-4">×”××™×“×¢ × ×©××¨ ××•×˜×•××˜×™×ª ×‘×“×¤×“×¤×Ÿ. ×”×©×ª××©×• ×‘×›×¤×ª×•×¨×™× ×”×‘××™× ×›×“×™ ×œ×©××•×¨ ×’×™×‘×•×™, ×œ×”×¢×‘×™×¨ ×œ××—×©×‘ ××—×¨ ××• ×œ×˜×¢×•×Ÿ × ×ª×•× ×™× ××§×•×‘×¥.</p>
                            <div class="flex flex-wrap gap-4 items-center">
                                <input type="file" id="fileImporter" class="hidden" accept=".json" onchange="importStateFromFile(event)">
                                <button onclick="document.getElementById('fileImporter').click()" class="px-5 py-2 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700">×˜×¢×Ÿ × ×ª×•× ×™ ×©×™×—...</button>
                                <button onclick="exportStateToFile()" class="px-5 py-2 bg-gray-600 text-white font-semibold rounded-lg hover:bg-gray-700">×©××•×¨ × ×ª×•× ×™ ×©×™×—</button>
                                <button onclick="exportSummaryForBuilder()" class="px-5 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700">×©××•×¨ ×¡×™×›×•× ×œ×›×œ×™ ×”×ª×›× ×•×Ÿ</button>
                                <button onclick="resetState()" class="px-5 py-2 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700">××¤×¡ ×”×›×œ</button>
                            </div>
                        </div>

                        <div>
                            <h3 class="text-xl font-bold text-gray-800 mb-3 border-b pb-2">×©×œ×‘ 1: ××™×“×¢ ×›×œ×œ×™</h3>
                            <div class="grid md:grid-cols-2 gap-4 mt-4">
                                <div><label class="block text-sm font-medium text-gray-700 mb-1">×©× ×‘×™×ª ×”×¡×¤×¨:</label><input type="text" value="${state.schoolName}" onchange="state.schoolName = this.value; saveStateToLocalStorage(); render()" class="w-full p-2 border border-gray-300 rounded-lg"/></div>
                                <div><label class="block text-sm font-medium text-gray-700 mb-1">×©× ×”×× ×”×œ/×ª:</label><input type="text" value="${state.principalName}" onchange="state.principalName = this.value; saveStateToLocalStorage(); render()" class="w-full p-2 border border-gray-300 rounded-lg"/></div>
                                <div><label class="block text-sm font-medium text-gray-700 mb-1">×©× ××“×¨×™×›×ª ×”×”×›×œ×”:</label><input type="text" value="${state.mentorName}" onchange="state.mentorName = this.value; saveStateToLocalStorage(); render()" class="w-full p-2 border border-gray-300 rounded-lg"/></div>
                                <div><label class="block text-sm font-medium text-gray-700 mb-1">×©× ×¨×›×–×ª ×”×”×›×œ×”:</label><input type="text" value="${state.coordinatorName}" onchange="state.coordinatorName = this.value; saveStateToLocalStorage(); render()" class="w-full p-2 border border-gray-300 rounded-lg"/></div>
                                <div><label class="block text-sm font-medium text-gray-700 mb-1">×©×¢×•×ª ×”×“×¨×›×” ×—×•×“×©×™×•×ª:</label><input type="text" value="${state.guidanceHours}" onchange="state.guidanceHours = this.value; saveStateToLocalStorage(); render()" class="w-full p-2 border border-gray-300 rounded-lg"/></div>
                            </div>
                            <div class="mt-4"><label class="block text-sm font-medium text-gray-700 mb-2">×™×•×/×™××™ ×”×“×¨×›×”:</label><div class="flex flex-wrap gap-x-4 gap-y-2">${daysOfWeek.map(day => `<label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" ${state.guidanceDays[day] ? 'checked' : ''} onchange="state.guidanceDays['${day}'] = this.checked; saveStateToLocalStorage(); render()" class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"/><span class="text-gray-700">${day}</span></label>`).join('')}</div></div>
                            <div class="mt-4"><label class="block text-sm font-medium text-gray-700 mb-2">×ª×—×•××™ ×”×“×¨×›×” × ×•×¡×¤×™×:</label><div class="grid grid-cols-2 md:grid-cols-4 gap-x-4 gap-y-2">${trainingAreas.map(area => `<div><label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" ${state.additionalTraining[area] ? 'checked' : ''} onchange="state.additionalTraining['${area}'] = this.checked; saveStateToLocalStorage(); render()" class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"/><span class="text-gray-700">${area}</span></label></div>`).join('')}</div>${state.additionalTraining['××—×¨'] ? `<div class="mt-2"><input type="text" placeholder="×¤×™×¨×•×˜ ×ª×—×•× ××—×¨" value="${state.customTraining}" onchange="state.customTraining = this.value; saveStateToLocalStorage(); render()" class="w-full p-2 text-sm border-gray-300 rounded-lg"/></div>` : ''}</div>
                        </div>

                        <div>
                            <h3 class="text-lg font-semibold text-gray-800 mb-2">× ×ª×•× ×™× ×‘×™×ª-×¡×¤×¨×™×™×:</h3>
                            <label class="block text-sm font-medium text-gray-700 mb-1">×ª×™××•×¨ ×”×¢×©×™×™×” ×”× ×•×›×—×™×ª ×‘×ª×—×•× ×”×”×›×œ×” ×•×”×”×•×’× ×•×ª:</label>
                            <textarea onchange="state.schoolData = this.value; saveStateToLocalStorage(); render()" class="w-full p-2 border border-gray-300 rounded-lg" rows="4">${state.schoolData}</textarea>
                        </div>

                        <div>
                            <h3 class="text-lg font-semibold text-gray-800 mb-2">×ª×•×‘× ×•×ª ×•××ª×’×¨×™×:</h3>
                            <label class="block text-sm font-medium text-gray-700 mb-1">××”× ×”××ª×’×¨×™× ×”××¨×›×–×™×™× ×•×œ××Ÿ ×©×•××¤×™× ×œ×”×’×™×¢?</label>
                            <textarea onchange="state.challenges = this.value; saveStateToLocalStorage(); render()" class="w-full p-2 border border-gray-300 rounded-lg" rows="4">${state.challenges}</textarea>
                        </div>
                        
                        <div class="text-center mt-6">
                            <button onclick="navigateTo('domains')" class="px-8 py-3 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-700 text-lg">×”××©×š ×œ×©×œ×‘ 2: ×‘×—×™×¨×ª ×–×™×¨×•×ª ×¤×¢×•×œ×”</button>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderDomainsView() { 
            const currentDomain = domains[state.currentDomain];
            return `
                <div class="bg-white rounded-xl shadow-lg p-8 mb-6 relative">
                    <div class="absolute top-6 left-6 flex gap-2">
                        <button onclick="exportStateToFile()" class="px-4 py-2 bg-gray-600 text-white font-semibold rounded-lg hover:bg-gray-700 text-sm flex items-center gap-2" title="×©××•×¨ ××ª ×›×œ × ×ª×•× ×™ ×”×©×™×— ×”× ×•×›×—×™×™×">
                            <span>×©××•×¨ × ×ª×•× ×™ ×©×™×—</span>
                        </button>
                        <button onclick="exportSummaryForBuilder()" class="px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 text-sm flex items-center gap-2" title="×©××•×¨ ×§×•×‘×¥ ×¡×™×›×•× ××•×ª×× ×œ×›×œ×™ ×ª×›× ×•×Ÿ ×”×¢×‘×•×“×”">
                            <span>×©××•×¨ ×¡×™×›×•× ×œ×›×œ×™ ×”×ª×›× ×•×Ÿ</span>
                        </button>
                    </div>

                    <h2 class="text-2xl font-bold text-indigo-800 mb-2">×©×œ×‘ 2: ×‘×—×™×¨×ª ×–×™×¨×•×ª ×¤×¢×•×œ×” ×•×ª×•×¦×¨×™×</h2>
                    <p class="text-sm text-red-600 font-semibold mb-4">×”×¢×¨×” ×—×©×•×‘×”! ×”×‘×—×™×¨×” ×¦×¨×™×›×” ×œ×”×™×•×ª ××•×ª×××ª ×œ××™× ×˜× ×¡×™×‘×™×•×ª ×”×”×“×¨×›×” ×•×œ××ª×’×¨×™ ×‘×™×ª-×”×¡×¤×¨.</p>
                    <div class="flex flex-wrap gap-2">${domains.map((domain, index) => `<button onclick="state.currentDomain = ${index}; render()" class="px-4 py-2 rounded-lg text-sm font-medium transition-colors ${state.currentDomain === index ? 'bg-indigo-600 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'}">${domain.title}</button>`).join('')}</div>
                    <div class="flex justify-between items-center mt-4">
                        <div class="text-sm text-gray-600">×–×™×¨×” ${state.currentDomain + 1} ××ª×•×š ${domains.length}</div>
                        <div class="text-sm text-indigo-600 font-medium">× ×‘×—×¨×• ${getSelectedCount()} ×ª×•×¦×¨×™×</div>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-2 mt-2"><div class="bg-indigo-600 h-2 rounded-full transition-all duration-300" style="width: ${((state.currentDomain + 1) / domains.length) * 100}%"></div></div>
                </div>
                <div class="bg-white rounded-xl shadow-lg p-8">
                    <div class="mb-6"><h2 class="text-2xl font-bold text-indigo-800 mb-2">${currentDomain.title}</h2></div>
                    <div class="space-y-6">
                        ${currentDomain.subtopics.map(subtopic => `
                            <div class="border border-gray-200 rounded-lg p-6">
                                <h3 class="text-xl font-semibold text-indigo-700 mb-4">${subtopic.title}</h3>
                                <div class="space-y-4">
                                    ${subtopic.expectedOutcomes.map((outcome, index) => {
                                        const key = `${currentDomain.id}_${subtopic.id}_${index}`;
                                        const isSelected = state.selectedItems[key];
                                        const hasSelectablePractices = outcome.selectablePractices && outcome.selectablePractices.length > 0;
                                        return `
                                            <div>
                                                <div onclick="toggleSelection('${currentDomain.id}', '${subtopic.id}', ${index})" class="p-4 rounded-lg border-2 cursor-pointer transition-all ${isSelected ? 'border-indigo-500 bg-indigo-50' : 'border-gray-200 hover:border-indigo-300 hover:bg-gray-50'}">
                                                    <div class="flex items-start gap-3">
                                                        <div class="w-5 h-5 rounded-full border-2 mt-1 flex-shrink-0 flex items-center justify-center ${isSelected ? 'bg-indigo-600 border-indigo-600' : 'border-gray-400'}">${isSelected ? '<div class="w-2 h-2 bg-white rounded-full"></div>' : ''}</div>
                                                        <div class="flex-grow">
                                                            <span class="${isSelected ? 'text-indigo-800 font-medium' : 'text-gray-700'}">${outcome.text}</span>
                                                            ${hasSelectablePractices && !isSelected ? '<p class="mt-2 text-sm font-medium text-indigo-600">×œ×—×¦×• ×œ×‘×—×™×¨×ª ×¤×¨×§×˜×™×§×•×ª ×•×“×’×©×™× ×œ×™×™×©×•×:</p>' : ''}
                                                        </div>
                                                    </div>
                                                </div>
                                                ${isSelected && hasSelectablePractices ? `
                                                    <div class="mr-8 mt-4 space-y-4 bg-gray-50 p-4 rounded-lg">
                                                        <div>
                                                            <h4 class="text-md font-semibold text-gray-800 mb-3">${outcome.practiceListTitle || '×‘×—×™×¨×ª ×¤×¨×§×˜×™×§×•×ª ×•×“×’×©×™× ×œ×™×™×©×•×:'}</h4>
                                                            <div class="grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-2">
                                                                ${outcome.selectablePractices.map(practice => `
                                                                    <div>
                                                                        <label class="flex items-center gap-2 text-sm cursor-pointer">
                                                                            <input type="checkbox" ${state.selectedPractices[key]?.[practice] ? 'checked' : ''} onchange="togglePractice('${key}', '${practice}')" class="rounded border-gray-300 text-green-600 focus:ring-green-500"/>
                                                                            <span class="text-gray-700">${practice}</span>
                                                                        </label>
                                                                        ${practice === '××—×¨' && state.selectedPractices[key]?.['××—×¨'] ? `
                                                                            <input type="text" placeholder="×¤×™×¨×•×˜" value="${state.customPractices[key] || ''}" onchange="state.customPractices['${key}'] = this.value; saveStateToLocalStorage(); render()" class="w-full mt-1 p-2 text-sm border-gray-300 rounded"/>
                                                                        ` : ''}
                                                                    </div>
                                                                `).join('')}
                                                            </div>
                                                        </div>
                                                    </div>
                                                ` : ''}
                                            </div>
                                        `;
                                    }).join('')}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                    <div class="flex justify-between items-center mt-8">
                        <button onclick="state.currentDomain = Math.max(0, state.currentDomain - 1); render()" ${state.currentDomain === 0 ? 'disabled' : ''} class="px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 disabled:opacity-50">×”×–×™×¨×” ×”×§×•×“××ª</button>
                        <button onclick="navigateTo('initial')" class="px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600">×—×–×¨×” ×œ××™×“×¢ ×”×›×œ×œ×™</button>
                        <button onclick="${state.currentDomain === domains.length - 1 ? 'navigateTo(\'additionalData\')' : 'state.currentDomain++; render()'}" class="px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700">${state.currentDomain === domains.length - 1 ? '×”××©×š ×œ× ×ª×•× ×™× × ×•×¡×¤×™×' : '×”×–×™×¨×” ×”×‘××”'}</button>
                    </div>
                </div>
            `;
        }

        function renderAdditionalDataView() {
            return `
                <div class="bg-white rounded-xl shadow-lg p-8 mt-6 relative">
                    <div class="absolute top-6 left-6 flex gap-2">
                         <button onclick="exportStateToFile()" class="px-4 py-2 bg-gray-600 text-white font-semibold rounded-lg hover:bg-gray-700 text-sm flex items-center gap-2" title="×©××•×¨ ××ª ×›×œ × ×ª×•× ×™ ×”×©×™×— ×”× ×•×›×—×™×™×">
                            <span>×©××•×¨ × ×ª×•× ×™ ×©×™×—</span>
                        </button>
                        <button onclick="exportSummaryForBuilder()" class="px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 text-sm flex items-center gap-2" title="×©××•×¨ ×§×•×‘×¥ ×¡×™×›×•× ××•×ª×× ×œ×›×œ×™ ×ª×›× ×•×Ÿ ×”×¢×‘×•×“×”">
                            <span>×©××•×¨ ×¡×™×›×•× ×œ×›×œ×™ ×”×ª×›× ×•×Ÿ</span>
                        </button>
                    </div>

                    <h2 class="text-2xl font-bold text-gray-800 mb-4 border-b pb-2">×©×œ×‘ 3: × ×ª×•× ×™× × ×•×¡×¤×™×</h2>
                    <div class="space-y-6">
                        <div>
                            <label class="block text-lg font-bold text-gray-800 mb-3">××¢× ×™/ ××©××‘×™ ×”×›×œ×” ×•×”×•×’× ×•×ª × ×•×¡×¤×™× <span class="text-sm font-normal">(×”×•×¨××” ××ª×§× ×ª, ×’×¤"×Ÿ, ×•×›×•'):</span></label>
                            <textarea onchange="state.additionalResources = this.value; saveStateToLocalStorage(); render()" class="w-full p-2 border border-gray-300 rounded-lg" rows="3">${state.additionalResources}</textarea>
                        </div>
                        <div class="grid md:grid-cols-2 gap-8">
                            <div class="p-4 bg-green-50 rounded-lg border border-green-200">
                                <h3 class="text-lg font-bold text-green-800 mb-3">×¤×¨×§×˜×™×§×•×ª ×”×“×¨×›×” ×•×œ×™×•×•×™ ×©×œ ××“×¨×™×›×ª ×”×”×›×œ×”:</h3>
                                <div class="space-y-2">
                                    ${teacherTrainingPractices.map(practice => `
                                        <div>
                                            <label class="flex items-center gap-2 text-sm cursor-pointer">
                                                <input type="checkbox" ${state.selectedTrainingPractices[practice] ? 'checked' : ''} onchange="state.selectedTrainingPractices['${practice}'] = this.checked; saveStateToLocalStorage(); render()" class="rounded border-gray-300 text-green-600 focus:ring-green-500"/>
                                                <span class="text-gray-700">${practice}</span>
                                            </label>
                                            ${practice === '××—×¨' && state.selectedTrainingPractices['××—×¨'] ? `
                                                <input type="text" placeholder="×¤×™×¨×•×˜" value="${state.customPractices['training_other'] || ''}" onchange="state.customPractices['training_other'] = this.value; saveStateToLocalStorage(); render()" class="w-full mt-1 p-2 text-sm border-gray-300 rounded"/>
                                            ` : ''}
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                            <div class="p-4 bg-blue-50 rounded-lg border border-blue-200">
                                <h3 class="text-lg font-bold text-blue-800 mb-3">×©×•×ª×¤×™× ×œ×§×™×“×•× ×ª×—×•× ×”×”×›×œ×” ×•×”×”×•×’× ×•×ª:</h3>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-2 mb-3">
                                    ${partnersList.map(partner => `
                                        <label class="flex items-center gap-2 text-sm cursor-pointer">
                                            <input type="checkbox" ${state.globalPartners[partner] ? 'checked' : ''} onchange="state.globalPartners['${partner}'] = this.checked; saveStateToLocalStorage(); render()" class="rounded border-gray-300 text-blue-600 focus:ring-blue-500"/>
                                            <span class="text-gray-700">${partner}</span>
                                        </label>
                                    `).join('')}
                                </div>
                                <div class="flex gap-2">
                                    <input type="text" id="customPartnerInput" placeholder="×”×•×¡×£ ×©×•×ª×£/×¤×” (××—×¨)" class="flex-1 p-2 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500"/>
                                    <button onclick="const input = document.getElementById('customPartnerInput'); if(input.value.trim()) { state.globalPartners[input.value.trim()] = true; input.value = ''; saveStateToLocalStorage(); render(); }" class="px-3 py-2 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 transition-colors">â•</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="flex justify-between items-center mt-8">
                        <button onclick="navigateTo('domains')" class="px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600">×—×–×¨×” ×œ×‘×—×™×¨×ª ×–×™×¨×•×ª</button>
                        <button onclick="createSummary()" class="px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700">ğŸ¯ ×¡×™×•× ×•×™×¦×™×¨×ª ×¡×™×›×•× ×©×™×—</button>
                    </div>
                </div>
            `;
        }

        function renderSummaryView() { if (!state.summaryData) return '<div>×˜×•×¢×Ÿ ×¡×™×›×•×...</div>'; const { summary, partners, trainingPractices, days, trainingAreas } = state.summaryData; return ` <div class="min-h-screen bg-gray-50 p-6 print-container"> <div class="max-w-5xl mx-auto"> <div class="bg-white rounded-xl shadow-lg p-8 print-content"> <div class="text-center mb-8"> <h1 class="text-3xl font-bold text-indigo-800 mb-2">×¡×™×›×•× ×©×™×— ×œ×ª×›× ×•×Ÿ ×ª×•×›× ×™×ª ×”×“×¨×›×”</h1> <h2 class="text-2xl font-bold text-indigo-800">×‘×ª×—×•× ×”×”×›×œ×” ×•×”×”×•×’× ×•×ª</h2> </div> <div class="mb-8 p-4 bg-gray-50 rounded-lg border border-gray-200 text-right space-y-3 page-break-inside-avoid"> <h3 class="text-xl font-bold text-gray-800">××™×“×¢ ×›×œ×œ×™:</h3> <p><span class="font-semibold">×©× ×‘×™×ª ×”×¡×¤×¨:</span> ${state.schoolName || "____________________"}</p> <p><span class="font-semibold">×©× ×”×× ×”×œ/×ª:</span> ${state.principalName || "____________________"}</p> <p><span class="font-semibold">×©× ××“×¨×™×›×ª ×”×”×›×œ×”:</span> ${state.mentorName || "____________________"}</p> <p><span class="font-semibold">×©× ×¨×›×–×ª ×”×”×›×œ×”:</span> ${state.coordinatorName || "____________________"}</p> <p><span class="font-semibold">×©×¢×•×ª ×”×“×¨×›×” ×—×•×“×©×™×•×ª:</span> ${state.guidanceHours || "____________________"}</p> <p><span class="font-semibold">×™×•×/×™××™ ×”×“×¨×›×”:</span> ${days || "×œ× × ×‘×—×¨×• ×™××™×"}</p> <p><span class="font-semibold">×ª×—×•××™ ×”×“×¨×›×” × ×•×¡×¤×™×:</span> ${trainingAreas || "×œ× × ×‘×—×¨×• ×ª×—×•××™×"}</p> </div> <div class="mb-8 p-4 bg-gray-50 rounded-lg border border-gray-200 text-right space-y-3 page-break-inside-avoid"> <h3 class="text-xl font-bold text-gray-800">× ×ª×•× ×™× ×‘×™×ª-×¡×¤×¨×™×™×:</h3> <p class="font-semibold">×ª×™××•×¨ ×”×¢×©×™×™×” ×”× ×•×›×—×™×ª:</p> <p class="whitespace-pre-wrap mt-1 text-gray-700 min-h-[50px]">${state.schoolData || ""}</p> </div> <div class="mb-8 p-4 bg-gray-50 rounded-lg border border-gray-200 text-right space-y-3 page-break-inside-avoid"> <h3 class="text-xl font-bold text-gray-800">×ª×•×‘× ×•×ª ×•××ª×’×¨×™×:</h3> <p class="font-semibold">×œ××Ÿ ×©×•××¤×™× ×œ×”×’×™×¢?</p> <p class="whitespace-pre-wrap mt-1 text-gray-700 min-h-[50px]">${state.challenges || ""}</p> </div> ${Object.keys(summary).length === 0 ? `<div class="text-center py-8"><p class="text-gray-600">×œ× × ×‘×—×¨×• ×–×™×¨×•×ª ×¤×¢×•×œ×”, ×ª×•×¦×¨×™× ××• ×¤×¨×§×˜×™×§×•×ª.</p></div>` : Object.entries(summary).map(([domainTitle, subtopics]) => ` <div class="mb-8 page-break-inside-avoid"> <h2 class="text-2xl font-bold text-indigo-700 mb-4 border-b-2 border-indigo-200 pb-2">${domainTitle}</h2> ${Object.entries(subtopics).map(([subtopicTitle, outcomes]) => ` <div class="mb-6 mr-4 page-break-inside-avoid"> <h3 class="text-xl font-semibold text-indigo-600 mb-3">${subtopicTitle}</h3> <ul class="list-disc pr-5 space-y-4"> ${outcomes.map(item => ` <li class="mb-4 p-3 bg-gray-50 rounded-lg"> <p class="font-medium text-gray-800">${item.outcome.replace(":", "")}</p> ${item.practices.length > 0 ? ` <div class="mt-2"> <p class="text-sm font-medium text-green-700">×¤×¨×§×˜×™×§×•×ª ×•×“×’×©×™× ×©× ×‘×—×¨×•: </p> <p class="text-sm text-gray-700">${item.practices.join('; ')}</p> </div> ` : ''} </li> `).join('')} </ul> </div> `).join('')} </div> `).join('')} <div class="mt-8 p-4 bg-green-50 rounded-lg page-break-inside-avoid"> <h2 class="text-lg font-bold text-green-800 mb-3">×¤×¨×§×˜×™×§×•×ª ×”×“×¨×›×” ×•×œ×™×•×•×™:</h2> <p class="text-green-700">${trainingPractices.join('; ')}</p> </div> <div class="mt-4 p-4 bg-blue-50 rounded-lg page-break-inside-avoid"> <h2 class="text-lg font-bold text-blue-800 mb-3">×©×•×ª×¤×™× ×œ×§×™×“×•× ×”×ª×—×•×:</h2> <p class="text-blue-700">${partners.join(', ')}</p> </div> <div class="mt-4 p-4 bg-gray-50 rounded-lg page-break-inside-avoid"> <h3 class="text-lg font-bold text-gray-800 mb-3">××©××‘×™× × ×•×¡×¤×™×:</h3> <p class="whitespace-pre-wrap mt-1 text-gray-700 min-h-[30px]">${state.additionalResources || ""}</p> </div> <div class="flex gap-4 mt-8 no-print"> <button onclick="navigateTo('additionalData')" class="px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors">×—×–×¨×” ×œ×¢×¨×™×›×”</button> <button onclick="window.print()" class="px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors">ğŸ–¨ï¸ ×”×“×¤×¡×”/×©××™×¨×” ×›-PDF</button> </div> </div> </div> </div> `; }
        
        function render() {
            const app = document.getElementById('app');
            let content = '';
            
            if (state.view === 'summary') {
                content = renderSummaryView();
            } else {
                content = `
                    <div class="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6 no-print">
                        <div class="max-w-6xl mx-auto">
                            ${state.view === 'initial' ? renderInitialView() : ''}
                            ${state.view === 'domains' ? renderDomainsView() : ''}
                            ${state.view === 'additionalData' ? renderAdditionalDataView() : ''}
                        </div>
                    </div>
                `;
            }
            
            app.innerHTML = content;
        }

        render();
    </script>

</body>
</html>
